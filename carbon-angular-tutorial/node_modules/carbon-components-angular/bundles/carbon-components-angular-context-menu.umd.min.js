/**
 *
 * carbon-angular v0.0.0 | carbon-components-angular-context-menu.umd.min.js
 *
 * Copyright 2014, 2021 IBM
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("carbon-components-angular/icon"),require("rxjs"),require("@angular/core")):"function"==typeof define&&define.amd?define("carbon-components-angular/context-menu",["exports","@angular/common","carbon-components-angular/icon","rxjs","@angular/core"],e):e((t["carbon-components-angular"]=t["carbon-components-angular"]||{},t["carbon-components-angular"]["context-menu"]={}),t.ng.common,t["carbon-components-angular"].icon,t.rxjs,t.ng.core)}(this,function(t,e,n,o,i){"use strict";var s=(r.decorators=[{type:i.Component,args:[{selector:"ibm-context-menu-divider",template:"",styles:["\n\t\t:host {\n\t\t\tdisplay: list-item;\n\t\t\tlist-style: none;\n\t\t}\n\t"]}]}],r.propDecorators={dividerClass:[{type:i.HostBinding,args:["class.bx--context-menu-divider"]}],role:[{type:i.HostBinding,args:["attr.role"]}]},r);function r(){this.dividerClass=!0,this.role="separator"}var c=(a.prototype.selectRadio=function(t){t&&(this.selectionSubject.next(t),this.value=[t])},a.prototype.selectCheckbox=function(e){e&&(this.value.includes(e)?this.value=this.value.filter(function(t){return t!==e}):this.value.push(e),this.selectionSubject.next(this.value))},a.prototype.selectCheckboxes=function(t){t&&(this.value=t,this.selectionSubject.next(t))},a.decorators=[{type:i.Injectable}],a.ctorParameters=function(){return[]},a);function a(){this.selectionSubject=new o.ReplaySubject(1),this.value=[],this.selectionObservable=this.selectionSubject.asObservable()}var u=(l.prototype.ngOnInit=function(){var e=this,t=this.contextMenuSelectionService.selectionObservable.subscribe(function(t){e.valueChange.emit(t)});this.subscription.add(t)},l.prototype.ngOnChanges=function(t){t.value&&("radio"===this.type&&this.contextMenuSelectionService.selectRadio(t.value.currentValue),"checkbox"===this.type&&this.contextMenuSelectionService.selectCheckboxes(t.value.currentValue))},l.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},l.decorators=[{type:i.Component,args:[{selector:"ibm-context-menu-group",template:'\n\t\t<ul role="group" [attr.aria-label]="label">\n\t\t\t<ng-content></ng-content>\n\t\t</ul>\n\t',providers:[c],styles:["\n\t\t:host {\n\t\t\tdisplay: list-item;\n\t\t\tlist-style: none;\n\t\t}\n\t"]}]}],l.ctorParameters=function(){return[{type:c}]},l.propDecorators={role:[{type:i.HostBinding,args:["attr.role"]}],label:[{type:i.Input}],value:[{type:i.Input}],type:[{type:i.Input}],valueChange:[{type:i.Output}]},l);function l(t){this.contextMenuSelectionService=t,this.role="none",this.label=null,this.value=[],this.type=null,this.valueChange=new i.EventEmitter,this.subscription=new o.Subscription}var p=(h.prototype.ngOnChanges=function(t){t.open&&t.open.currentValue&&this.focusMenu()},h.prototype.focusMenu=function(){var t=this,e=this.elementRef.nativeElement.querySelector("ul");setTimeout(function(){t.root?e.focus():e.querySelector(".bx--context-menu-option").focus()})},h.prototype.handleNavigation=function(t){var e=this.elementRef.nativeElement.querySelector("ul"),n=Array.from(e.querySelectorAll("ul[role=menu]")),o=Array.from(e.querySelectorAll(".bx--context-menu-option")).filter(function(e){return!n.some(function(t){return t.contains(e)})}),i=o.findIndex(function(t){return 0===parseInt(t.getAttribute("tabindex"),10)}),s=o[i];switch(t.key){case"ArrowDown":document.activeElement===e?o[0].focus():-1!==i&&i<o.length-1&&o[i+1].focus();break;case"ArrowUp":document.activeElement===e?o[o.length-1].focus():-1!==i&&0<i&&o[i-1].focus();break;case"ArrowRight":-1!==i&&n.some(function(t){return s.contains(t)})&&s.click();break;case"ArrowLeft":var r=s.parentElement.closest(".bx--context-menu-option");r&&r.focus()}},h.prototype.getDimensions=function(){return this.elementRef.nativeElement.querySelector("ul").getBoundingClientRect()},h.decorators=[{type:i.Component,args:[{selector:"ibm-context-menu",template:'\n\t\t<ul\n\t\t\tclass="bx--context-menu"\n\t\t\t[ngClass]="{\n\t\t\t\t\'bx--context-menu--root\': root,\n\t\t\t\t\'bx--context-menu--open\': open\n\t\t\t}"\n\t\t\trole="menu"\n\t\t\ttabindex="-1"\n\t\t\t[ngStyle]="{\n\t\t\t\t\'left.px\': position.left,\n\t\t\t\t\'top.px\': position.top\n\t\t\t}">\n\t\t\t<ng-content></ng-content>\n\t\t</ul>\n\t'}]}],h.ctorParameters=function(){return[{type:i.ElementRef}]},h.propDecorators={root:[{type:i.Input}],open:[{type:i.Input}],position:[{type:i.Input}],handleNavigation:[{type:i.HostListener,args:["keydown",["$event"]]}]},h);function h(t){this.elementRef=t,this.root=!0,this.open=!1,this.position={left:0,top:0}}var d=(m.prototype.ngOnInit=function(){var t,e=this;switch(this.type){case"checkbox":this.role="menuitemcheckbox",this.selectable=!0;break;case"radio":this.role="menuitemradio",this.selectable=!0;break;default:this.role="menuitem"}this.type&&this.contextMenuSelectionService&&this.value&&(t=this.contextMenuSelectionService.selectionObservable.subscribe(function(t){"radio"===e.type&&e.handleSelection(t===e.value),"checkbox"===e.type&&e.handleSelection(t.includes(e.value))}),this.subscriptions.add(t))},m.prototype.ngAfterContentInit=function(){this.childContextMenu&&(this.hasChildren=!0,this.ariaHasPopup=!0,this.ariaExpanded=!1,this.childContextMenu.root=!1)},m.prototype.handleClick=function(t){t.stopPropagation(),this.hasChildren&&(this.openSubMenu(),this.childContextMenu.focusMenu()),this.type&&this.handleSelection(!this.checked),this.contextMenuSelectionService&&("radio"===this.type&&this.contextMenuSelectionService.selectRadio(this.value),"checkbox"===this.type&&this.contextMenuSelectionService.selectCheckbox(this.value))},m.prototype.handleSelection=function(t){this.checked=t,this.checkedChange.emit(this.checked)},m.prototype.openSubMenu=function(){var t;this.childContextMenu&&(this.childContextMenu.open=!0,this.ariaExpanded=!0,t=this.getDimensions(),this.childContextMenu.position.left=t.left+t.width,this.childContextMenu.position.top=t.top-4)},m.prototype.closeSubMenu=function(){this.childContextMenu&&(this.childContextMenu.open=!1,this.ariaExpanded=!1)},m.prototype.handleMouseOver=function(){this.openSubMenu()},m.prototype.handleMouseOut=function(){this.closeSubMenu()},m.prototype.handleFocus=function(){this.tabindex=0,this.hasChildren&&this.ariaExpanded&&this.closeSubMenu()},m.prototype.handleBlur=function(){this.tabindex=-1},m.prototype.focusItem=function(){this.elementRef.nativeElement.focus()},m.prototype.getDimensions=function(){return this.elementRef.nativeElement.querySelector(".bx--context-menu-option__content").getBoundingClientRect()},m.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},m.decorators=[{type:i.Component,args:[{selector:"ibm-context-menu-item",template:'\n\t\t<div class="bx--context-menu-option__content">\n\t\t\t<div class="bx--context-menu-option__icon">\n\t\t\t\t<svg *ngIf="selectable && checked" ibmIcon="checkmark" size="16"></svg>\n\t\t\t\t<svg *ngIf="!selectable && icon" [ibmIcon]="icon" size="16"></svg>\n\t\t\t</div>\n\t\t\t<span class="bx--context-menu-option__label" [title]="label">{{label}}</span>\n\t\t\t<div class="bx--context-menu-option__info">\n\t\t\t\t{{info}}\n\t\t\t\t<svg *ngIf="hasChildren" ibmIcon="caret--right" size="16"></svg>\n\t\t\t</div>\n\t\t</div>\n\t\t<ng-content></ng-content>\n\t',styles:["\n\t\t:host {\n\t\t\tdisplay: list-item;\n\t\t\tlist-style: none;\n\t\t}\n\t"]}]}],m.ctorParameters=function(){return[{type:i.ElementRef},{type:c,decorators:[{type:i.Optional}]}]},m.propDecorators={optionClass:[{type:i.HostBinding,args:["class.bx--context-menu-option"]}],role:[{type:i.HostBinding,args:["attr.role"]}],tabindex:[{type:i.HostBinding,args:["attr.tabindex"]}],ariaHasPopup:[{type:i.HostBinding,args:["attr.aria-haspopup"]}],ariaExpanded:[{type:i.HostBinding,args:["attr.aria-expanded"]}],label:[{type:i.Input}],info:[{type:i.Input}],type:[{type:i.Input}],checked:[{type:i.Input}],icon:[{type:i.Input}],value:[{type:i.Input}],checkedChange:[{type:i.Output}],childContextMenu:[{type:i.ContentChild,args:[p,{"static":!0}]}],handleClick:[{type:i.HostListener,args:["keydown.enter",["$event"]]},{type:i.HostListener,args:["keydown.space",["$event"]]},{type:i.HostListener,args:["click",["$event"]]}],handleMouseOver:[{type:i.HostListener,args:["mouseover"]}],handleMouseOut:[{type:i.HostListener,args:["mouseout"]}],handleFocus:[{type:i.HostListener,args:["focus"]}],handleBlur:[{type:i.HostListener,args:["blur"]}]},m);function m(t,e){this.elementRef=t,this.contextMenuSelectionService=e,this.optionClass=!0,this.role="menuitem",this.tabindex=-1,this.ariaHasPopup=null,this.ariaExpanded=null,this.label="",this.info="",this.type=null,this.checked=!1,this.icon="",this.value="",this.checkedChange=new i.EventEmitter,this.hasChildren=!1,this.selectable=!1,this.subscriptions=new o.Subscription}var y=(b.decorators=[{type:i.NgModule,args:[{declarations:[s,u,d,p],exports:[s,u,d,p],imports:[e.CommonModule,n.IconModule]}]}],b);function b(){}t.Éµa=c,t.ContextMenuModule=y,t.ContextMenuDividerComponent=s,t.ContextMenuGroupComponent=u,t.ContextMenuItemComponent=d,t.ContextMenuComponent=p,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=carbon-components-angular-context-menu.umd.min.js.map